{% extends "index.html" %}

{% block body %}

<div class="row">
    <div class="container"> 
        <div>
            <h3>
                {{product_info['product_name']}}
            </h3>
        </div>
        <div class="carousel" >
            {% for img_path in product_info['img_path_array'] %}
                <a class="carousel-item" href="#"><img src="{{ url_for('static',filename='images/'+img_path)}}"></a>

            {% endfor %}
        </div>
        <div class="container center " style="padding: 2em;"> 
            <div id="rater" ></div>
            <p>
                Average Rating : {{product_info['avg_rating']}}
            </p>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        $('.carousel').carousel({padding:1});
        setInterval(function() {
            $('.carousel').carousel('next');
        }, 2500);
        var starRatingStep = raterJs( {
            starSize:52, 
            step:0.5, 
            element:document.querySelector("#rater"), 
            rateCallback:function rateCallback(rating, done) {
                this.setRating(rating); 
                console.log("rating set to : "+ JSON.stringify(rating));
                done(); 
            }
        }); 

        {% if product_info['has_user_rated'] %}
            starRatingStep.setRating({{product_info["user_rating"]}})  
            console.log("set to previous user rating")
        {% endif %}
    })
</script>

{% endblock %}